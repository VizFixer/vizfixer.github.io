(this["webpackJsonplinter-user-study"]=this["webpackJsonplinter-user-study"]||[]).push([[0],{368:function(e,t,n){},369:function(e,t,n){},370:function(e,t,n){},411:function(e,t,n){},498:function(e,t,n){},519:function(e,t,n){"use strict";n.r(t);var i=n(8),r=n.n(i),c=n(179),a=n.n(c),s=(n(368),n(0)),o=n(1),l=n(5),p=n(6),h=(n(369),n(550)),d=n(547),j=(n(329),n(370),n(552)),u=n(553),b=n(546),g=n(48),O=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.spec,n=e.isPreview,i=e.linterSpec,r=Object(g.jsxs)(j.a,{children:[Object(g.jsx)(u.a,{span:8,children:Object(g.jsx)(b.a,{spec:i,height:180,width:180})}),Object(g.jsx)(u.a,{span:2}),Object(g.jsx)(u.a,{span:8,children:Object(g.jsx)(b.a,{spec:t,height:180,width:180})})]}),c=Object(g.jsxs)(j.a,{style:{fontWeight:600},children:[Object(g.jsx)(u.a,{span:8,children:"Optimized Chart"}),Object(g.jsx)(u.a,{span:2}),Object(g.jsx)(u.a,{span:8,children:"Original chart"})]}),a=n?r:Object(g.jsx)(b.a,{spec:t,height:180,width:180});return c=n?c:Object(g.jsx)("div",{}),Object(g.jsxs)("div",{children:[c,a]})}}]),n}(i.Component),f=(n(411),n(325)),v=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).endEditing=function(){if(e.node)try{e.props.onEndEdit(JSON.parse(e.node.innerText))}catch(t){console.log("json parse error:"+t)}},e.handleEditorChange=function(t,n){try{e.props.onEndEdit(JSON.parse(t))}catch(i){console.log("json parse error:"+i)}},e}return Object(o.a)(n,[{key:"editorDidMount",value:function(e,t){e.focus()}},{key:"onChange",value:function(e,t){try{this.props.onEndEdit(JSON.parse(e))}catch(n){console.log("json parse error:"+n)}}},{key:"render",value:function(){var e=this.props,t=e.spec,n=e.isPreview,i=e.linterSpec,r=this.props.originalSpec,c=n?Object(g.jsx)(f.a,{height:"79vh",language:"json",original:JSON.stringify(r,null,2),value:JSON.stringify(i,null,2),options:{renderSideBySide:!1,readOnly:!0},onChange:this.onChange.bind(this)}):Object(g.jsx)(f.b,{height:"79vh",language:"json",value:JSON.stringify(t,null,2),onChange:this.onChange.bind(this),editorDidMount:this.editorDidMount});return Object(g.jsx)("div",{children:c})}}]),n}(i.Component),x=n(12),m=n.n(x),y=n(96),w=(n(498),n(551)),S=n(549),C=n(554),E=n(292),P=n.n(E),k="https://vizfixer-api.idvxlab.com:8008",L=function(){var e=Object(y.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P()({method:"POST",url:k+"/lint",headers:{"Content-Type":"application/json; charset=urf-8"},data:{spec:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(y.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P()({method:"POST",url:k+"/fix",headers:{"Content-Type":"application/json; ccharset=urf-8"},data:{spec:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.ruleContent,t=this.props.index;return Object(g.jsx)("div",{children:t+". "+e.explain})}}]),n}(i.Component),T=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(g.jsx)("div",{children:this.props.actionContent[3]})}}]),n}(i.Component),F=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).getLint=function(){var e=Object(y.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:n=e.sent,i.setState({violatedRules:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.getFix=function(){var e=Object(y.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:(n=e.sent).data.fixable&&i.setState({fixable:!0,optimizeActions:n.data.optimize_actions,optimizeSpec:n.data.optimize_spec,enablePreview:!0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.showOptimizeSpec=function(){try{i.props.onEndEdit(i.state.optimizeSpec)}catch(e){console.log("json parse error:"+e)}},i.showPreview=function(){i.props.togglePreview(),i.props.setLinterSpec(i.state.optimizeSpec)},i.acceptSuggestion=function(){try{i.props.onEndEdit(i.state.optimizeSpec),i.props.togglePreview()}catch(e){console.log("json parse error:"+e)}},i.handleOk=function(){i.setState({isModalVisible:!1});try{i.props.onEndEdit(i.state.optimizeSpec)}catch(e){console.log("json parse error:"+e)}},i.handleCancel=function(){i.props.togglePreview()},i.state={violatedRules:[],optimizeActions:[],fixable:!1,optimizeSpec:{},enablePreview:!1},i}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props.spec,n=this.state.enablePreview;return Object(g.jsxs)("div",{children:[Object(g.jsx)(w.a,{danger:!0,onClick:function(){return e.getLint(t)},children:"Inspect Specs"}),Object(g.jsx)(S.a,{placement:"rightTop",title:"Toggle Linter",children:Object(g.jsx)(C.a,{fill:"#08c",height:"1em",width:"1em",style:{marginLeft:10}})}),Object(g.jsx)("div",{className:"violated-rules",children:Object(g.jsxs)("div",{style:{marginLeft:16},children:[Object(g.jsx)("p",{style:{fontWeight:800,margin:0},children:"Violated Rules:"}),this.state.violatedRules.map((function(e,t){return Object(g.jsx)(N,{ruleContent:e,index:t+1},t)}))]})}),Object(g.jsx)("br",{}),Object(g.jsx)(w.a,{danger:!0,onClick:function(){return e.getFix(t)},children:"Suggest Revision"}),Object(g.jsx)(S.a,{placement:"rightTop",title:"Toggle Fixer",children:Object(g.jsx)(C.a,{color:"#08c",height:"1em",width:"1em",style:{marginLeft:10}})}),Object(g.jsxs)("div",{className:"violated-rules",children:[Object(g.jsxs)("div",{style:{marginLeft:16},children:[Object(g.jsx)("p",{style:{fontWeight:800,margin:0},children:"Fix suggestions:"}),this.state.optimizeActions.map((function(e,t){return Object(g.jsx)(T,{actionContent:e,index:t+1},t)}))]}),Object(g.jsx)("br",{}),Object(g.jsx)(w.a,{onClick:this.showPreview,disabled:!n,children:"Preview"}),Object(g.jsx)(S.a,{placement:"rightTop",title:"Toggle Preview",children:Object(g.jsx)(C.a,{color:"#08c",height:"1em",width:"1em",style:{marginLeft:10}})}),Object(g.jsx)(w.a,{onClick:this.acceptSuggestion,type:"primary",style:{marginLeft:20},children:"Accept"}),Object(g.jsx)(w.a,{onClick:this.handleCancel,children:"Reject"})]})]})}}]),n}(i.Component),A={data:{url:"data/cars.json"},mark:"bar",encoding:{x:{field:"Origin",type:"nominal",scale:{type:"log"}},y:{field:"Acceleration",type:"quantitative",aggregate:"mn"}}},J=h.a.Header,V=h.a.Sider,R=h.a.Content,M=d.a.Option,B=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).onEndEdit=function(e){i.setState({spec:e})},i.setLinterSpec=function(e){i.setState({linterSpec:e})},i.togglePreview=function(){i.setState({isPreview:!i.state.isPreview})},i.handleChange=function(e){console.log("selected ".concat(e))},i.state={spec:A,isPreview:!1,linterSpec:{}},i}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state,t=e.spec,n=e.isPreview,i=e.linterSpec;return Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(h.a,{children:[Object(g.jsx)(J,{className:"header",style:{backgroundColor:"#fff"},children:Object(g.jsx)("div",{children:Object(g.jsx)("p",{className:"title",children:"VizFixer"})})}),Object(g.jsxs)(h.a,{children:[Object(g.jsxs)(V,{className:"CodeView-container",theme:"light",width:570,children:[Object(g.jsxs)("div",{style:{marginBottom:15,marginLeft:29,fontWeight:800,fontFamily:"Avenir"},children:["Examples:",Object(g.jsxs)(d.a,{defaultValue:"barchart",style:{width:120,marginLeft:5},onChange:this.handleChange,children:[Object(g.jsx)(M,{value:"demo1",children:"barchart"}),Object(g.jsx)(M,{value:"demo2",children:"scatterplot"})]})]}),Object(g.jsx)(v,{spec:t,originalSpec:A,onEndEdit:this.onEndEdit,isPreview:n,linterSpec:i})]}),Object(g.jsxs)(h.a,{style:{height:"calc(100vh - 64px)"},children:[Object(g.jsx)(R,{className:"ChartView-container",children:Object(g.jsx)(O,{spec:t,isPreview:n,linterSpec:i})}),Object(g.jsx)(R,{className:"LinterView-container",style:{backgroundColor:"#fff"},children:Object(g.jsx)(F,{spec:t,onEndEdit:this.onEndEdit,isPreview:n,togglePreview:this.togglePreview,setLinterSpec:this.setLinterSpec})})]})]})]})})}}]),n}(r.a.Component),D=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,556)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),i(e),r(e),c(e),a(e)}))};a.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(B,{})}),document.getElementById("root")),D()}},[[519,1,2]]]);
//# sourceMappingURL=main.335ca131.chunk.js.map