{"version":3,"sources":["view/ChartView/index.js","view/CodeView/index.js","network/url.js","network/getLinter.js","network/getFixer.js","view/LinterView/rule.js","view/LinterView/action.js","view/LinterView/index.js","demo.js","App.js","assets/demo/barchart1.js","assets/demo/barchart2.js","assets/demo/scatterplot1.js","assets/demo/scatterplot2.js","assets/demo/linechart1.js","reportWebVitals.js","index.js"],"names":["index","this","props","spec","isPreview","linterSpec","diffChart","span","VegaLite","height","width","header","style","fontWeight","chartView","Component","endEditing","node","onEndEdit","JSON","parse","innerText","error","console","log","handleEditorChange","value","event","editor","monaco","focus","newValue","e","language","original","stringify","options","renderSideBySide","readOnly","onChange","bind","editorDidMount","url","getLinter","a","axios","getFixer","rule","ruleContent","explain","action","actionContent","getLint","response","setState","violatedRules","data","showRulesAndActions","getFix","fixable","optimizeActions","optimize_actions","optimizeSpec","optimize_spec","enablePreview","showOptimizeSpec","state","showPreview","togglePreview","setLinterSpec","showAccept","stateshowAccept","acceptSuggestion","handleOk","isModalVisible","handleCancel","nextProps","nextState","currentCase","danger","onClick","placement","title","InfoCircleOutlined","fill","marginLeft","className","display","margin","map","d","i","color","disabled","length","type","visibility","demo","demoCase","barchart1","barchart2","scatterplot1","scatterplot2","linechart1","Header","Layout","Sider","Content","Option","Select","App","handleChange","backgroundColor","theme","marginBottom","fontFamily","defaultValue","originalSpec","React","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.03026515.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport './index.css'\nimport { Row, Col } from 'antd'\nimport { VegaLite } from 'react-vega'\n\nexport default class index extends Component {\n\n    render() {\n        let { spec, isPreview, linterSpec } = this.props;\n        let diffChart = <Row>\n            <Col span={8}><VegaLite spec={linterSpec} height={180} width={180} /></Col>\n            <Col span={2}></Col>\n            <Col span={8}><VegaLite spec={spec} height={180} width={180} /></Col>\n        </Row>\n        let header = <Row style={{ fontWeight: 600 }}>\n            <Col span={8}>Optimized Chart</Col>\n            <Col span={2}></Col>\n            <Col span={8}>Original chart</Col>\n        </Row>\n        let chartView = isPreview ? diffChart : <VegaLite spec={spec} height={180} width={180} />\n        header = isPreview ? header : <div></div>\n        return (\n            <div>\n                {header}\n                {chartView}\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport './index.css'\n// import Editor from \"@monaco-editor/react\";\n// import Editor, { DiffEditor, useMonaco, loader } from \"@monaco-editor/react\";\nimport MonacoEditor, { MonacoDiffEditor } from 'react-monaco-editor';\n\nexport default class index extends Component {\n    editorDidMount(editor, monaco) {\n        editor.focus();\n    }\n\n    onChange(newValue, e) {\n        try {\n            this.props.onEndEdit(JSON.parse(newValue));\n        } catch (error) {\n            console.log(\"json parse error:\" + error);\n        }\n    }\n\n    endEditing = () => {\n        if (this.node) {\n            try {\n                this.props.onEndEdit(JSON.parse(this.node.innerText));\n            } catch (error) {\n                console.log(\"json parse error:\" + error);\n            }\n        }\n    }\n\n    handleEditorChange = (value, event) => {\n        try {\n            this.props.onEndEdit(JSON.parse(value));\n        } catch (error) {\n            console.log(\"json parse error:\" + error);\n        }\n    }\n\n    render() {\n        let {spec, isPreview, linterSpec} = this.props;\n        // let originalSpec = this.props.originalSpec;\n        const options = {\n            renderSideBySide: false,\n            readOnly: true\n        };\n\n        let editor = isPreview ? <MonacoDiffEditor\n            height=\"79vh\"\n            language=\"json\"\n            original={JSON.stringify(spec, null, 2)}\n            value={JSON.stringify(linterSpec, null, 2)}\n            options={options}\n            onChange={this.onChange.bind(this)}\n        // editorDidMount={this.editorDidMount}\n        /> :\n            <MonacoEditor\n                height=\"79vh\"\n                language=\"json\"\n                value={JSON.stringify(spec, null, 2)}\n                onChange={this.onChange.bind(this)}\n                editorDidMount={this.editorDidMount}\n            />\n\n        return (\n            <div>\n                {editor}        \n            </div>\n        )\n    }\n}\n","const url = \"https://vizfixer-api.idvxlab.com:8008\"\n\nexport {url}","import axios from \"axios\";\nimport {url} from './url';\n\nconst getLinter = async (spec) => axios ({\n    \"method\": \"POST\",\n    \"url\": url + \"/lint\",\n    \"headers\": {\n        \"Content-Type\": \"application/json; charset=urf-8\"\n    },\n    \"data\":{\n        \"spec\": spec\n    }\n})\n\nexport default getLinter;","import axios from \"axios\";\nimport {url} from './url';\n\nconst getFixer = async (spec) => axios ({\n    \"method\": \"POST\",\n    \"url\": url + \"/fix\",\n    \"headers\": {\n        \"Content-Type\": \"application/json; ccharset=urf-8\"\n    },\n    \"data\":{\n        \"spec\": spec\n    }\n})\n\nexport default getFixer;","import React, { Component } from 'react'\n\nexport default class rule extends Component {\n  render() {\n    let rule = this.props.ruleContent\n    let index = this.props.index\n    return (\n      <div>\n        {index+ '. ' + rule.explain}\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react'\n\nexport default class action extends Component {\n    \n    render() {\n        // let actionArr = this.props.actionContent.filter(function(d) { return d !== \"\"; })\n        // let action = actionArr.join('_');\n        return (\n            <div>\n                {this.props.actionContent[3]}\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\nimport './index.css'\nimport { Button, Tooltip } from 'antd';\nimport { InfoCircleOutlined } from '@ant-design/icons';\nimport 'antd/dist/antd.css'\n\nimport getLinter from \"../../network/getLinter\"\nimport getFixer from \"../../network/getFixer\"\nimport Rule from \"./rule\"\nimport Action from \"./action\"\n// import ModalView from \"./modalview\"\n\nexport default class index extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      violatedRules: [],\n      optimizeActions: [],\n      fixable: false,\n      optimizeSpec: {},\n      enablePreview: false,\n      showAccept: false,\n      showRulesAndActions: false\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if(nextProps.currentCase !== this.props.currentCase) {\n      this.setState({\n        violatedRules: [],\n        optimizeActions: [],\n        showRulesAndActions: false\n      })\n    }\n    return true\n  }\n\n  getLint = async (spec) => {\n    let response = await getLinter(spec);\n    this.setState({\n      violatedRules: response.data,\n      showRulesAndActions: true\n    })\n  }\n\n  getFix = async (spec) => {\n    let response = await getFixer(spec);\n    if (response.data.fixable) {\n      this.setState({\n        fixable: true,\n        optimizeActions: response.data.optimize_actions,\n        optimizeSpec: response.data.optimize_spec,\n        enablePreview: true,\n        showRulesAndActions: true\n      })\n    }\n  }\n\n  showOptimizeSpec = () => {\n    try {\n      this.props.onEndEdit(this.state.optimizeSpec);\n    } catch (error) {\n      console.log(\"json parse error:\" + error);\n    }\n  }\n\n  showPreview = () => {\n    this.props.togglePreview();\n    this.props.setLinterSpec(this.state.optimizeSpec)\n    this.setState({\n      showAccept: !this.stateshowAccept\n    })\n  }\n\n  acceptSuggestion = () => {\n    try {\n      this.props.onEndEdit(this.state.optimizeSpec);\n      this.props.togglePreview();\n    } catch (error) {\n      console.log(\"json parse error:\" + error);\n    }\n    this.setState({\n      showAccept: false,\n      showRulesAndActions: false,\n      violatedRules: [],\n      optimizeActions: []\n    })\n  }\n\n  handleOk = () => {\n    this.setState({\n      isModalVisible: false\n    })\n    // this.props.setAnswer(this.props.index, this.state.radioValue)\n    try {\n      this.props.onEndEdit(this.state.optimizeSpec);\n    } catch (error) {\n      console.log(\"json parse error:\" + error);\n    }\n    this.setState({\n      showAccept: false\n    })\n  };\n\n  handleCancel = () => {\n    this.props.togglePreview();\n    this.setState({\n      showAccept: false\n    })\n  };\n\n  render() {\n    let spec = this.props.spec;\n    let { enablePreview, showAccept, showRulesAndActions } = this.state;\n    return (\n      <div>\n        <Button danger onClick={() => this.getLint(spec)}>\n          Inspect Specs\n        </Button>\n        <Tooltip placement=\"rightTop\" title={'Toggle Linter'}>\n          <InfoCircleOutlined fill='#08c' height='1em' width='1em' style={{ marginLeft: 10 }} />\n        </Tooltip>\n        <div className=\"violated-rules\">\n          <div style={{ marginLeft: 16, display: showRulesAndActions ? 'block' : 'none' }}>\n            <p style={{ fontWeight: 800, margin: 0 }}>Violated Rules:</p>\n            {this.state.violatedRules.map((d, i) => {\n              return <Rule ruleContent={d} index={i + 1} key={i} />\n            })}\n          </div>\n        </div>\n\n        <br></br>\n        <Button danger onClick={() => this.getFix(spec)}>\n          Suggest Revision\n        </Button>\n        <Tooltip placement=\"rightTop\" title={'Toggle Fixer'}>\n          <InfoCircleOutlined color='#08c' height='1em' width='1em' style={{ marginLeft: 10 }} />\n        </Tooltip>\n        <div className=\"violated-rules\">\n          <div style={{ marginLeft: 16, display: showRulesAndActions ? 'block' : 'none' }}>\n            <p style={{ fontWeight: 800, margin: 0 }}>Fix suggestions:</p>\n            {this.state.optimizeActions.map((d, i) => {\n              return <Action actionContent={d} index={i + 1} key={i} />\n            })}\n          </div>\n          <br></br>\n          <Button onClick={this.showPreview} disabled={!enablePreview || !this.state.optimizeActions.length}>\n            Preview\n          </Button>\n          <Tooltip placement=\"rightTop\" title={'Toggle Preview'}>\n            <InfoCircleOutlined color='#08c' height='1em' width='1em' style={{ marginLeft: 10 }} />\n          </Tooltip>\n\n          <Button onClick={this.acceptSuggestion} type=\"primary\" style={{ marginLeft: 20, visibility: showAccept ? 'visible' : 'hidden' }}>Accept</Button>\n          <Button onClick={this.handleCancel} style={{ visibility: showAccept ? 'visible' : 'hidden' }}>Reject</Button>\n        </div>\n      </div>\n    )\n  }\n}\n","const demo = {\n    \"data\": {\n        \"url\": \"data/cars.json\"\n    },\n    \"mark\": \"bar\",\n    \"encoding\": {\n        \"x\": {\n            \"field\": \"Origin\",\n            \"type\": \"nominal\",\n            \"scale\": {\n                \"type\": \"log\"\n            }\n        },\n        \"y\": {\n            \"field\": \"Acceleration\",\n            \"type\": \"quantitative\",\n            \"aggregate\": \"mn\"\n        }\n    }\n}\n\nexport default demo;\n","// import logo from './logo.svg';\nimport React from 'react';\nimport './App.css';\nimport { Layout, Select } from 'antd';\nimport 'antd/dist/antd.css'\n\nimport ChartView from './view/ChartView/index'\nimport CodeView from './view/CodeView/index'\nimport LinterView from './view/LinterView/index'\nimport demo from \"./demo\"\nimport barchart1 from \"./assets/demo/barchart1\"\nimport barchart2 from \"./assets/demo/barchart2\"\nimport scatterplot1 from \"./assets/demo/scatterplot1\"\nimport scatterplot2 from \"./assets/demo/scatterplot2\"\nimport linechart1 from \"./assets/demo/linechart1\"\n\nlet demoCase = {\n  barchart1: barchart1,\n  barchart2: barchart2,\n  scatterplot1: scatterplot1,\n  scatterplot2: scatterplot2,\n  linechart1: linechart1\n}\n\nconst { Header, Sider, Content } = Layout;\nconst { Option } = Select;\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spec: demo,\n      isPreview: false,\n      linterSpec: {},\n      currentCase: 'barchart1'\n    };\n  }\n\n  onEndEdit = (spec) => {\n    this.setState({\n      spec\n    })\n  }\n\n  setLinterSpec = (linterSpec) => {\n    this.setState({\n      linterSpec\n    })\n  }\n\n  togglePreview = () => {\n    this.setState({\n      isPreview: !this.state.isPreview\n    })\n  }\n\n  handleChange = (value) => {\n    this.setState({\n      spec: demoCase[value],\n      currentCase: value\n    })\n  }\n\n\n  render() {\n    let { spec, isPreview, linterSpec, currentCase } = this.state;\n    return (\n      <div className=\"App\">\n        <Layout>\n          <Header className=\"header\" style={{ backgroundColor: \"#fff\" }}>\n            <div>\n              <p className=\"title\">VizFixer</p>\n            </div>\n          </Header>\n          <Layout>\n            <Sider className=\"CodeView-container\" theme=\"light\" width={500}>\n              <div style={{marginBottom: 15, marginLeft: 29, fontWeight: 800, fontFamily: 'Avenir'}}>\n                Examples:\n                <Select defaultValue=\"barchart1\" style={{ width: 130, marginLeft: 5 }} onChange={this.handleChange}>\n                <Option value=\"barchart1\">barchart1</Option>\n                <Option value=\"barchart2\">barchart2</Option>\n                <Option value=\"scatterplot1\">scatterplot1</Option>\n                <Option value=\"scatterplot2\">scatterplot2</Option>\n                <Option value=\"linechart1\">linechart1</Option>\n              </Select></div>\n              \n              <CodeView spec={spec} originalSpec={demo} onEndEdit={this.onEndEdit} isPreview={isPreview} linterSpec={linterSpec} />\n            </Sider>\n            <Layout style={{ height: 'calc(100vh - 64px)' }}>\n              <Content className=\"ChartView-container\">\n                <ChartView spec={spec} isPreview={isPreview} linterSpec={linterSpec} />\n              </Content>\n              <Content className=\"LinterView-container\" style={{ backgroundColor: \"#fff\" }}>\n                <LinterView spec={spec} currentCase={currentCase} onEndEdit={this.onEndEdit} isPreview={isPreview} togglePreview={this.togglePreview} setLinterSpec={this.setLinterSpec} />\n              </Content>\n            </Layout>\n          </Layout>\n        </Layout>\n      </div>\n    );\n  }\n}\n\n","const barchart1 = {\n    \"data\": {\n        \"url\": \"data/cars.json\"\n    },\n    \"mark\": \"bar\",\n    \"encoding\": {\n        \"x\": {\n            \"field\": \"Origin\",\n            \"type\": \"nominal\",\n            \"scale\": {\n                \"type\": \"log\"\n            }\n        },\n        \"y\": {\n            \"field\": \"Acceleration\",\n            \"type\": \"quantitative\",\n            \"aggregate\": \"mn\"\n        }\n    }\n}\n\nexport default barchart1;\n","const barchart2 = {\n    \"data\": {\n        \"url\": \"data/seattle-weather.csv\"\n    },\n    \"mark\": \"bar\",\n    \"encoding\": {\n        \"y\": {\n            \"field\": \"weather\",\n            \"type\": \"nominal\"\n        },\n        \"x\": {\n            \"field\": \"wind\",\n            \"type\": \"quantitative\",\n            \"aggregate\": \"mean\",\n            \"scale\": {\n                \"zero\": false\n            },\n            \"stack\": \"normalize\"\n        }\n    }\n}\n\nexport default barchart2;","const scatterplot1 = {\n    \"data\": {\n        \"url\": \"data/cars.json\"\n    },\n    \"mark\": \"point\",\n    \"encoding\": {\n        \"x\": {\n            \"field\": \"Horsepower\",\n            \"type\": \"quantitative\",\n        },\n        \"y\": {\n            \"field\": \"Acceleration\",\n            \"type\": \"quantitative\"\n        },\n        \"size\": {\n            \"field\": \"Origin\",\n            \"type\": \"nominal\"\n        }\n    }\n}\n\nexport default scatterplot1;\n","const scatterplot1 = {\n    \"data\": {\n        \"url\": \"data/seattle-weather.csv\"\n    },\n    \"mark\": \"point\",\n    \"encoding\": {\n        \"x\": {\n            \"field\": \"date\",\n            \"type\": \"temporal\",\n            \"aggregate\": \"mean\"\n        },\n        \"y\": {\n            \"field\": \"temp_max\",\n            \"type\": \"quantitative\",\n            \"scale\": {\n                \"type\": \"log\"\n            }\n        },\n        \"size\": {\n            \"field\": \"temp_min\",\n            \"type\": \"quantitative\"\n        }\n    }\n}\n\nexport default scatterplot1;\n","const linechart2 = {\n    \"data\": {\n        \"url\": \"data/cars.json\"\n    },\n    \"mark\": \"line\",\n    \"encoding\": {\n        \"x\": {\n            \"field\": \"Year\",\n            \"type\": \"temporal\"\n        }\n    }\n}\n\nexport default linechart2;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}