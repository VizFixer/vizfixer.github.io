(this["webpackJsonplinter-user-study"]=this["webpackJsonplinter-user-study"]||[]).push([[0],{368:function(e,t,n){},369:function(e,t,n){},370:function(e,t,n){},411:function(e,t,n){},498:function(e,t,n){},518:function(e,t,n){"use strict";n.r(t);var i=n(8),a=n.n(i),r=n(179),c=n.n(r),s=(n(368),n(0)),o=n(1),l=n(5),p=n(6),d=(n(369),n(550)),h=n(547),u=(n(329),n(370),n(552)),j=n(553),b=n(546),g=n(45),f=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.spec,n=e.isPreview,i=e.linterSpec,a=Object(g.jsxs)(u.a,{children:[Object(g.jsx)(j.a,{span:8,children:Object(g.jsx)(b.a,{spec:i,height:180,width:180})}),Object(g.jsx)(j.a,{span:2}),Object(g.jsx)(j.a,{span:8,children:Object(g.jsx)(b.a,{spec:t,height:180,width:180})})]}),r=Object(g.jsxs)(u.a,{style:{fontWeight:600},children:[Object(g.jsx)(j.a,{span:8,children:"Optimized Chart"}),Object(g.jsx)(j.a,{span:2}),Object(g.jsx)(j.a,{span:8,children:"Original chart"})]}),c=n?a:Object(g.jsx)(b.a,{spec:t,height:180,width:180});return r=n?r:Object(g.jsx)("div",{}),Object(g.jsxs)("div",{children:[r,c]})}}]),n}(i.Component),O=(n(411),n(325)),v=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).endEditing=function(){if(e.node)try{e.props.onEndEdit(JSON.parse(e.node.innerText))}catch(t){console.log("json parse error:"+t)}},e.handleEditorChange=function(t,n){try{e.props.onEndEdit(JSON.parse(t))}catch(i){console.log("json parse error:"+i)}},e}return Object(o.a)(n,[{key:"editorDidMount",value:function(e,t){e.focus()}},{key:"onChange",value:function(e,t){try{this.props.onEndEdit(JSON.parse(e))}catch(n){console.log("json parse error:"+n)}}},{key:"render",value:function(){var e=this.props,t=e.spec,n=e.isPreview,i=e.linterSpec,a=n?Object(g.jsx)(O.a,{height:"79vh",language:"json",original:JSON.stringify(t,null,2),value:JSON.stringify(i,null,2),options:{renderSideBySide:!1,readOnly:!0},onChange:this.onChange.bind(this)}):Object(g.jsx)(O.b,{height:"79vh",language:"json",value:JSON.stringify(t,null,2),onChange:this.onChange.bind(this),editorDidMount:this.editorDidMount});return Object(g.jsx)("div",{children:a})}}]),n}(i.Component),x=n(12),m=n.n(x),y=n(96),w=(n(498),n(551)),S=n(549),C=n(554),k=n(292),A=n.n(k),E="https://vizfixer-api.idvxlab.com:8008",P=function(){var e=Object(y.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A()({method:"POST",url:E+"/lint",headers:{"Content-Type":"application/json; charset=urf-8"},data:{spec:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(y.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A()({method:"POST",url:E+"/fix",headers:{"Content-Type":"application/json; ccharset=urf-8"},data:{spec:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.ruleContent,t=this.props.index;return Object(g.jsx)("div",{children:t+". "+e.explain})}}]),n}(i.Component),N=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(g.jsx)("div",{children:this.props.actionContent[3]})}}]),n}(i.Component),R=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).getLint=function(){var e=Object(y.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:n=e.sent,i.setState({violatedRules:n.data,showRulesAndActions:!0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.getFix=function(){var e=Object(y.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:(n=e.sent).data.fixable&&i.setState({fixable:!0,optimizeActions:n.data.optimize_actions,optimizeSpec:n.data.optimize_spec,enablePreview:!0,showRulesAndActions:!0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.showOptimizeSpec=function(){try{i.props.onEndEdit(i.state.optimizeSpec)}catch(e){console.log("json parse error:"+e)}},i.showPreview=function(){i.props.togglePreview(),i.props.setLinterSpec(i.state.optimizeSpec),i.setState({showAccept:!i.stateshowAccept})},i.acceptSuggestion=function(){try{i.props.onEndEdit(i.state.optimizeSpec),i.props.togglePreview()}catch(e){console.log("json parse error:"+e)}i.setState({showAccept:!1,showRulesAndActions:!1,violatedRules:[],optimizeActions:[]})},i.handleOk=function(){i.setState({isModalVisible:!1});try{i.props.onEndEdit(i.state.optimizeSpec)}catch(e){console.log("json parse error:"+e)}i.setState({showAccept:!1})},i.handleCancel=function(){i.props.togglePreview(),i.setState({showAccept:!1})},i.state={violatedRules:[],optimizeActions:[],fixable:!1,optimizeSpec:{},enablePreview:!1,showAccept:!1,showRulesAndActions:!1},i}return Object(o.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return e.currentCase!==this.props.currentCase&&this.setState({violatedRules:[],optimizeActions:[],showRulesAndActions:!1}),!0}},{key:"render",value:function(){var e=this,t=this.props.spec,n=this.state,i=n.enablePreview,a=n.showAccept,r=n.showRulesAndActions;return Object(g.jsxs)("div",{children:[Object(g.jsx)(w.a,{danger:!0,onClick:function(){return e.getLint(t)},children:"Inspect Specs"}),Object(g.jsx)(S.a,{placement:"rightTop",title:"Toggle Linter",children:Object(g.jsx)(C.a,{fill:"#08c",height:"1em",width:"1em",style:{marginLeft:10}})}),Object(g.jsx)("div",{className:"violated-rules",children:Object(g.jsxs)("div",{style:{marginLeft:16,display:r?"block":"none"},children:[Object(g.jsx)("p",{style:{fontWeight:800,margin:0},children:"Violated Rules:"}),this.state.violatedRules.map((function(e,t){return Object(g.jsx)(L,{ruleContent:e,index:t+1},t)}))]})}),Object(g.jsx)("br",{}),Object(g.jsx)(w.a,{danger:!0,onClick:function(){return e.getFix(t)},children:"Suggest Revision"}),Object(g.jsx)(S.a,{placement:"rightTop",title:"Toggle Fixer",children:Object(g.jsx)(C.a,{color:"#08c",height:"1em",width:"1em",style:{marginLeft:10}})}),Object(g.jsxs)("div",{className:"violated-rules",children:[Object(g.jsxs)("div",{style:{marginLeft:16,display:r?"block":"none"},children:[Object(g.jsx)("p",{style:{fontWeight:800,margin:0},children:"Fix suggestions:"}),this.state.optimizeActions.map((function(e,t){return Object(g.jsx)(N,{actionContent:e,index:t+1},t)}))]}),Object(g.jsx)("br",{}),Object(g.jsx)(w.a,{onClick:this.showPreview,disabled:!i||!this.state.optimizeActions.length,children:"Preview"}),Object(g.jsx)(S.a,{placement:"rightTop",title:"Toggle Preview",children:Object(g.jsx)(C.a,{color:"#08c",height:"1em",width:"1em",style:{marginLeft:10}})}),Object(g.jsx)(w.a,{onClick:this.acceptSuggestion,type:"primary",style:{marginLeft:20,visibility:a?"visible":"hidden"},children:"Accept"}),Object(g.jsx)(w.a,{onClick:this.handleCancel,style:{visibility:a?"visible":"hidden"},children:"Reject"})]})]})}}]),n}(i.Component),T={data:{url:"data/cars.json"},mark:"bar",encoding:{x:{field:"Origin",type:"nominal",scale:{type:"log"}},y:{field:"Acceleration",type:"quantitative",aggregate:"mn"}}},F={barchart1:{data:{url:"data/cars.json"},mark:"bar",encoding:{x:{field:"Origin",type:"nominal",scale:{type:"log"}},y:{field:"Acceleration",type:"quantitative",aggregate:"mn"}}},barchart2:{data:{url:"data/seattle-weather.csv"},mark:"bar",encoding:{y:{field:"weather",type:"nominal"},x:{field:"wind",type:"quantitative",aggregate:"mean",scale:{zero:!1},stack:"normalize"}}},scatterplot1:{data:{url:"data/cars.json"},mark:"point",encoding:{x:{field:"Horsepower",type:"quantitative"},y:{field:"Acceleration",type:"quantitative"},size:{field:"Origin",type:"nominal"}}},scatterplot2:{data:{url:"data/seattle-weather.csv"},mark:"point",encoding:{x:{field:"date",type:"temporal",aggregate:"mean"},y:{field:"temp_max",type:"quantitative",scale:{type:"log"}},size:{field:"temp_min",type:"quantitative"}}},linechart1:{data:{url:"data/cars.json"},mark:"line",encoding:{x:{field:"Year",type:"temporal"}}}},J=d.a.Header,q=d.a.Sider,V=d.a.Content,M=h.a.Option,B=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).onEndEdit=function(e){i.setState({spec:e})},i.setLinterSpec=function(e){i.setState({linterSpec:e})},i.togglePreview=function(){i.setState({isPreview:!i.state.isPreview})},i.handleChange=function(e){i.setState({spec:F[e],currentCase:e})},i.state={spec:T,isPreview:!1,linterSpec:{},currentCase:"barchart1"},i}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state,t=e.spec,n=e.isPreview,i=e.linterSpec,a=e.currentCase;return Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(d.a,{children:[Object(g.jsx)(J,{className:"header",style:{backgroundColor:"#fff"},children:Object(g.jsx)("div",{children:Object(g.jsx)("p",{className:"title",children:"VizFixer"})})}),Object(g.jsxs)(d.a,{children:[Object(g.jsxs)(q,{className:"CodeView-container",theme:"light",width:500,children:[Object(g.jsxs)("div",{style:{marginBottom:15,marginLeft:29,fontWeight:800,fontFamily:"Avenir"},children:["Examples:",Object(g.jsxs)(h.a,{defaultValue:"barchart1",style:{width:130,marginLeft:5},onChange:this.handleChange,children:[Object(g.jsx)(M,{value:"barchart1",children:"barchart1"}),Object(g.jsx)(M,{value:"barchart2",children:"barchart2"}),Object(g.jsx)(M,{value:"scatterplot1",children:"scatterplot1"}),Object(g.jsx)(M,{value:"scatterplot2",children:"scatterplot2"}),Object(g.jsx)(M,{value:"linechart1",children:"linechart1"})]})]}),Object(g.jsx)(v,{spec:t,originalSpec:T,onEndEdit:this.onEndEdit,isPreview:n,linterSpec:i})]}),Object(g.jsxs)(d.a,{style:{height:"calc(100vh - 64px)"},children:[Object(g.jsx)(V,{className:"ChartView-container",children:Object(g.jsx)(f,{spec:t,isPreview:n,linterSpec:i})}),Object(g.jsx)(V,{className:"LinterView-container",style:{backgroundColor:"#fff"},children:Object(g.jsx)(R,{spec:t,currentCase:a,onEndEdit:this.onEndEdit,isPreview:n,togglePreview:this.togglePreview,setLinterSpec:this.setLinterSpec})})]})]})]})})}}]),n}(a.a.Component),D=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,556)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),r(e),c(e)}))};c.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(B,{})}),document.getElementById("root")),D()}},[[518,1,2]]]);
//# sourceMappingURL=main.03026515.chunk.js.map